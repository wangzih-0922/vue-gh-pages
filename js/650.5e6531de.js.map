{"version":3,"file":"js/650.5e6531de.js","mappings":"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","sources":["webpack://vue-w6-cli/./src/views/CartView.vue","webpack://vue-w6-cli/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\n  <h2 class=\"text-center mt-3\">購物車列表</h2>\n    <div class=\"container\">\n      <LoadingOverlay :active=\"isLoading\"></LoadingOverlay>\n      <div class=\"mt-4\">\n<!-- 購物車列表 -->\n        <div class=\"text-end\">\n          <button class=\"btn btn-outline-danger\" type=\"button\" @click=\"delAllCart\" :disabled=\"cartData.carts.length === 0\">清空購物車</button>\n        </div>\n        <table class=\"table align-middle\">\n          <thead>\n            <tr>\n              <th></th>\n              <th>品名</th>\n              <th style=\"width: 150px\">數量/單位</th>\n              <th>單價</th>\n            </tr>\n          </thead>\n          <tbody>\n            <template v-if=\"cartData.carts\">\n              <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n                <td>\n                  <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"delCartItem(item.id)\">x</button>\n                </td>\n                <td>\n                  {{ item.product.title }}\n                </td>\n                <td>\n                  <div class=\"input-group input-group-sm\">\n                    <div class=\"input-group mb-3\">\n                      <select class=\"form-select\" v-model=\"item.qty\" @change=\"updatedproduct(item)\" :disabled=\"isLoadingItem === item.id\">\n                        <option :value=\"num\" v-for=\"num in 20\" :key=\"`${num}-${item.id}`\">{{num}}\n                        </option>\n                      </select>\n                      <span class=\"input-group-text\" id=\"basic-addon2\">\n                        {{item.product.unit}}\n                      </span>\n                    </div>\n                  </div>\n                </td>\n                <td class=\"text-end\">\n                  {{item.total}}\n                </td>\n              </tr>\n            </template>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan=\"3\" class=\"text-end\">總計</td>\n              <td class=\"text-end\">{{ cartData.total }}</td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n      <!-- 表單 -->\n      <div class=\"my-5 row justify-content-center\">\n        <MyForm ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"submit\">\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\">Email</label>\n            <MyField id=\"email\" name=\"email\" type=\"email\" class=\"form-control\" :class=\"{ 'is-invalid': errors['email'] }\" placeholder=\"請輸入 Email\" rules=\"email|required\" v-model=\"user.email\">\n            </MyField>\n            <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\n          </div>\n        <div class=\"mb-3\">\n          <label for=\"name\" class=\"form-label\">收件人姓名</label>\n          <MyField id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['姓名'] }\" placeholder=\"請輸入姓名\" rules=\"required\" v-model=\"user.name\"></MyField>\n          <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"tel\" class=\"form-label\">收件人電話</label>\n          <MyField id=\"tel\" name=\"電話\" type=\"tel\" class=\"form-control\" :class=\"{ 'is-invalid': errors['電話'] }\" placeholder=\"請輸入電話\" rules=\"min:8|max:10|required\" v-model=\"user.tel\"></MyField>\n          <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"address\" class=\"form-label\">收件人地址</label>\n          <MyField id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['地址'] }\" placeholder=\"請輸入地址\" rules=\"required\" v-model=\"user.address\"></MyField>\n          <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"message\" class=\"form-label\">留言</label>\n          <textarea id=\"message\" class=\"form-control\" cols=\"30\" rows=\"10\" v-model=\"message\"></textarea>\n        </div>\n        <div class=\"text-end\">\n          <button type=\"submit\" class=\"btn btn-danger\" :disabled=\"cartData.carts.length === 0\">送出訂單</button>\n        </div>\n        </MyForm>\n      </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      productData: [],\n      id: '',\n      cartData: {\n        carts: []\n      },\n      isLoadingItem: '',\n      isLoading: false,\n      user: {\n        name: '',\n        email: '',\n        tel: '',\n        address: ''\n      },\n      message: ''\n    }\n  },\n  methods: {\n    getCartList () {\n      this.isLoading = true\n      this.$http.get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          this.cartData = res.data.data\n          this.isLoading = false\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n    delAllCart () {\n      this.$http.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`)\n        .then((res) => {\n          alert('已刪除全部購物車')\n          this.getCartList()\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n    delCartItem (id) {\n      this.$http.delete(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`)\n        .then((res) => {\n          alert('已刪除此商品')\n          this.getCartList()\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n    updatedproduct (item) {\n      this.isLoadingItem = item.id\n      this.$http.put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`, {\n        data: {\n          product_id: item.id,\n          qty: item.qty\n        }\n      })\n        .then((res) => {\n          alert('購物車已更新')\n          this.getCartList()\n          this.isLoadingItem = ''\n        })\n        .catch((error) => {\n          console.log(error)\n        })\n    },\n    submit () {\n      this.$http.post(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`, {\n        data: {\n          user: this.user,\n          message: this.message\n        }\n      })\n        .then((res) => {\n          alert(res.data.message)\n          this.getCartList()\n          this.$refs.form.resetForm()\n          this.message = ''\n        })\n        .catch((error) => {\n          console.log(error)\n          alert(error.data.message)\n        })\n    }\n  },\n  mounted () {\n    this.getCartList()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=3d0b7452\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/oumurasaki/Developer/第六週主線/vue-w6-cli/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","style","id","colspan","for","_hoisted_1","_createVNode","_component_LoadingOverlay","active","$data","type","onClick","$options","disabled","carts","length","_hoisted_5","_hoisted_7","_createElementBlock","_Fragment","key","_renderList","item","_hoisted_8","_toDisplayString","product","title","qty","$event","onChange","num","value","_hoisted_12","unit","total","_hoisted_15","_component_MyForm","ref","onSubmit","errors","_hoisted_19","_component_MyField","name","placeholder","rules","email","_component_error_message","_hoisted_21","_hoisted_23","tel","_hoisted_25","address","_hoisted_27","cols","rows","_hoisted_29","data","productData","cartData","isLoadingItem","isLoading","user","message","methods","getCartList","this","$http","get","then","res","catch","error","console","log","delAllCart","delete","alert","delCartItem","updatedproduct","put","product_id","submit","post","$refs","form","resetForm","mounted","__exports__","render"],"sourceRoot":""}